import{a as M}from"./vendor-CQpva9gi.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();window.openMenu=function(){document.getElementById("backdrop").classList.add("is-open")};window.closeMenu=function(){document.getElementById("backdrop").classList.remove("is-open")};window.menuLayoutClickHandler=function(e){e.stopPropagation()};async function N(){return await(await fetch("https://your-energy.b.goit.study/api/quote",{headers:{Accept:"application/json"}})).json()}function D(t){const e=new Date().toISOString().split("T")[0];localStorage.setItem("quote",JSON.stringify({date:e,data:t}))}function R(){const t=JSON.parse(localStorage.getItem("quote"));if(t){const e=new Date().toISOString().split("T")[0];if(t.date===e)return t.data}return null}async function C(){let t=R();if(!t)try{t=await N(),D(t)}catch(e){console.error("Error fetching the quote:",e);return}document.querySelectorAll(".quote-text").forEach(e=>{e.textContent=t.quote}),document.querySelectorAll(".quote-author").forEach(e=>{e.textContent=t.author})}document.addEventListener("DOMContentLoaded",C);const V="/desperate-pancakes-development/assets/icons-D0JUX4go.svg",q="https://your-energy.b.goit.study/api/exercises/";let d=null,u=!1,n;const c=document.querySelector(".modal-overlay"),x=document.querySelector(".exercise"),T=document.querySelector(".modal-close-button"),$=document.querySelector(".modal-image-gif"),j=document.querySelector(".modal-info-name"),B=document.querySelector(".modal-info-rating-score"),H=document.querySelector(".modal-info-rating-stars-filled"),J=document.querySelector(".modal-info-targets-list"),_=document.querySelector(".modal-info-description"),m=document.querySelector(".add-to-favorites"),w=document.querySelector(".give-a-rating"),k=document.querySelector(".rating"),f=document.getElementById("userForm"),h=document.querySelector(".modal-close-rating-button"),g=document.querySelectorAll(".custom-radio-star"),O=document.querySelector(".modal-rating-block-score-value"),a=document.querySelector(".modal-error-label-text");let l;function y(){T.removeEventListener("click",F),c.removeEventListener("click",P),document.removeEventListener("keydown",I),W()}function F(){c.classList.remove("is-open"),y()}function P(t){t.target===c&&(c.classList.remove("is-open"),y())}function I(t){t.key==="Escape"&&(c.classList.remove("is-open"),y())}function W(){u=!1,d=null,l=0}function Q(){T.addEventListener("click",F),c.addEventListener("click",P),document.addEventListener("keydown",I)}function U(){m.removeEventListener("click",L),m.addEventListener("click",L)}function L(t){t.preventDefault();const e=JSON.parse(window.localStorage.getItem("favorites"));if(!e||!e.length?window.localStorage.setItem("favorites",JSON.stringify([n._id])):e.includes(n._id)||window.localStorage.setItem("favorites",JSON.stringify([...e,n._id])),u){const o=e.filter(i=>i!==n._id);window.localStorage.setItem("favorites",JSON.stringify([...o])),typeof window.removeExerciseFromFavoritesWithAnimation=="function"&&window.removeExerciseFromFavoritesWithAnimation(n._id)}A(n._id)}function A(t){const e=JSON.parse(window.localStorage.getItem("favorites"));e&&e.length&&e.includes(t)?(u=!0,m.innerHTML=`Remove from favorites
                        <svg class='add-to-favorites-icon'>
                            <use href='../images/modal-window-sprite.svg#icon-trash'></use>
                        </svg>`):(u=!1,m.innerHTML=`Add to favorites
                        <svg class='add-to-favorites-icon'>
                            <use href='../images/modal-window-sprite.svg#icon-heart-favorites'></use>
                        </svg>`)}function S(){x.classList.add("hide-window"),setTimeout(()=>{k.classList.remove("hide-window")},150)}function v(){k.classList.add("hide-window"),setTimeout(()=>{O.innerText="0.0",g.forEach(t=>{t.classList.remove("checked-rating")}),x.classList.remove("hide-window"),f.reset()},150)}function E(t){t.preventDefault(),l=t.target.value,O.innerText=`${l}.0`,g.forEach(e=>{Number(e.value)<=Number(l)?e.classList.add("checked-rating"):e.classList.remove("checked-rating")})}function b(t){t.preventDefault();const e=new FormData(f),o=Object.fromEntries(e.entries()),i=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;if(o.email&&!i.test(o.email.toString())){a.innerText="Invalid email format";return}l&&(o.rate=Number(l)),o.rate&&o.email&&o.review?(a.innerText="",z(o)):o.rate?o.email?o.review||(a.innerText="Please fill in your comment"):a.innerText="Please fill in your email":a.innerText="Please give a rating"}async function z(t){const e=q+d+"/rating";try{const o=await fetch(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw a.innerText="Something went wrong. Please try again",new Error(`Error: ${o.status} ${o.statusText}`);const i=await o.json();return v(),i}catch(o){throw a.innerText="Something went wrong. Please try again",console.error("Error sending PATCH request:",o.message),o}}function K(){w.removeEventListener("click",S),h.removeEventListener("click",v),f.removeEventListener("submit",b),g.forEach(t=>{t.removeEventListener("click",E)}),w.addEventListener("click",S),h.addEventListener("click",v),f.addEventListener("submit",b),g.forEach(t=>{t.addEventListener("click",E)})}const Z=async t=>{try{return(await M.get(q+t)).data}catch(e){throw console.error("Error fetching data",e),e}};async function X(t){if(t.target.matches("[data-modal-open]")&&(d=t.target.getAttribute("data-modal-open"),d.length&&(n=await Z(d),n))){Q(),K(),A(n._id),U(),$.src=n.gifUrl||"../images/gif.jpg",j.innerText=n.name||"";const e=Math.round(n.rating),o=e*20+20;H.style.setProperty("width",`${o}px`,"important"),B.innerText=`${e}.0`;const i={target:{title:"Target",subtitle:n.target},bodyPart:{title:"Body Part",subtitle:n.bodyPart},equipment:{title:"Equipment",subtitle:n.equipment},popularity:{title:"Popular",subtitle:n.popularity},burnedCalories:{title:"Burned calories",subtitle:`${n.burnedCalories}/${n.time}`}};J.innerHTML=Object.keys(i).map(r=>`<li class='modal-info-targets-list-item'>
    <div class='modal-info-targets-list-item-container'>
    <p class='modal-info-targets-list-item-container-title'>${i[r].title}</p>
    <p class='modal-info-targets-list-item-container-subtitle'>${i[r].subtitle}</p>
    </div>
  </li>`).join(""),_.innerHTML=`<p>${n.description}</p>`,c.classList.add("is-open")}}export{X as h,V as i};
//# sourceMappingURL=modal-window-CqhDkQfR.js.map
